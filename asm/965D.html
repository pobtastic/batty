<!DOCTYPE html>
<html>
<head>
<title>Batty: Routine at 965D</title>
<meta charset="utf-8" />
<link rel="stylesheet" type="text/css" href="../skoolkit.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-dark.css" />
<link rel="stylesheet" type="text/css" href="../skoolkit-wide.css" />
<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-75RERFCHBG"></script>
<script>
window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-75RERFCHBG');
</script>
</head>
<body class="Asm-c">
<table class="header">
<tr>
<td class="logo"><a href="../index.html"><img alt="logo" src="../images/logo.png" /></a></td>
<td class="page-header">Routines</td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="964B.html">964B</a>
</td>
<td class="up">Up: <a href="../maps/all.html#965d">Map</a></td>
<td class="next">
Next: <a href="974A.html">974A</a>
</td>
</tr>
</table>
<div class="description">965D: Routine at 965D</div>
<table class="disassembly">
<tr>
<td class="routine-comment" colspan="5">
<div class="details">
<div class="paragraph">
Used by the routine at <a href="974A.html">974A</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="965d"></span>965D</td>
<td class="instruction">LD A,($B7E5)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9660"></span>9660</td>
<td class="instruction">CP $02</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9662"></span>9662</td>
<td class="instruction">JR NZ,<a href="965D.html#969b">$969B</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9664"></span>9664</td>
<td class="instruction">LD A,($9653)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9667"></span>9667</td>
<td class="instruction">AND A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9668"></span>9668</td>
<td class="instruction">JR Z,<a href="965D.html#969b">$969B</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="966a"></span>966A</td>
<td class="instruction">PUSH BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="966b"></span>966B</td>
<td class="instruction">LD HL,$B7A6</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="966e"></span>966E</td>
<td class="instruction">LD DE,$B7C8</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9671"></span>9671</td>
<td class="instruction">LD B,$0A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9673"></span>9673</td>
<td class="instruction">CALL <a href="BDCF.html#be02">$BE02</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9676"></span>9676</td>
<td class="instruction">LD HL,$B7EC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9679"></span>9679</td>
<td class="instruction">LD DE,$B7F4</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="967c"></span>967C</td>
<td class="instruction">LD B,$03</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="967e"></span>967E</td>
<td class="instruction">CALL <a href="BDCF.html#be02">$BE02</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9681"></span>9681</td>
<td class="instruction">POP BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9682"></span>9682</td>
<td class="instruction">CALL <a href="965D.html#969b">$969B</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9685"></span>9685</td>
<td class="instruction">LD HL,$B7A6</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9688"></span>9688</td>
<td class="instruction">LD DE,$B7C8</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="968b"></span>968B</td>
<td class="instruction">LD B,$0A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="968d"></span>968D</td>
<td class="instruction">CALL <a href="BDCF.html#be02">$BE02</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9690"></span>9690</td>
<td class="instruction">LD HL,$B7EC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9693"></span>9693</td>
<td class="instruction">LD DE,$B7F4</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9696"></span>9696</td>
<td class="instruction">LD B,$03</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9698"></span>9698</td>
<td class="instruction">JP <a href="BDCF.html#be02">$BE02</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="969b"></span>969B</td>
<td class="instruction">LD HL,$9654</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="969e"></span>969E</td>
<td class="instruction">LD A,($B7EE)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="96a1"></span>96A1</td>
<td class="instruction">CP (HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96a2"></span>96A2</td>
<td class="instruction">JR C,<a href="965D.html#96a7">$96A7</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96a4"></span>96A4</td>
<td class="instruction">INC HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96a5"></span>96A5</td>
<td class="instruction">JR <a href="965D.html#96a1">$96A1</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="96a7"></span>96A7</td>
<td class="instruction">LD E,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96a8"></span>96A8</td>
<td class="instruction">LD HL,$B7EC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96ab"></span>96AB</td>
<td class="instruction">LD A,C</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96ac"></span>96AC</td>
<td class="instruction">ADD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96ad"></span>96AD</td>
<td class="instruction">DAA</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96ae"></span>96AE</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96af"></span>96AF</td>
<td class="instruction">INC HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96b0"></span>96B0</td>
<td class="instruction">LD A,B</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96b1"></span>96B1</td>
<td class="instruction">ADC A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96b2"></span>96B2</td>
<td class="instruction">DAA</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96b3"></span>96B3</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96b4"></span>96B4</td>
<td class="instruction">INC HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96b5"></span>96B5</td>
<td class="instruction">LD A,$00</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96b7"></span>96B7</td>
<td class="instruction">ADC A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96b8"></span>96B8</td>
<td class="instruction">DAA</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96b9"></span>96B9</td>
<td class="instruction">LD (HL),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96ba"></span>96BA</td>
<td class="instruction">CP E</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96bb"></span>96BB</td>
<td class="instruction">JR C,<a href="965D.html#96f2">$96F2</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96bd"></span>96BD</td>
<td class="instruction">PUSH HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96be"></span>96BE</td>
<td class="instruction">PUSH IX</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96c0"></span>96C0</td>
<td class="instruction">LD IX,$9BC2</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96c4"></span>96C4</td>
<td class="instruction">CALL <a href="B61C.html#b684">$B684</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96c7"></span>96C7</td>
<td class="instruction">CALL <a href="974A.html#9910">$9910</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96ca"></span>96CA</td>
<td class="instruction">CALL <a href="974A.html#9c25">$9C25</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96cd"></span>96CD</td>
<td class="instruction">LD (IX+$11),$00</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96d1"></span>96D1</td>
<td class="instruction">LD A,(IX+$02)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96d4"></span>96D4</td>
<td class="instruction">ADD A,$10</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96d6"></span>96D6</td>
<td class="instruction">CP $E9</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96d8"></span>96D8</td>
<td class="instruction">JR NC,<a href="965D.html#96dd">$96DD</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96da"></span>96DA</td>
<td class="instruction">LD (IX+$02),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="96dd"></span>96DD</td>
<td class="instruction">LD A,($B7E8)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96e0"></span>96E0</td>
<td class="instruction">INC A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96e1"></span>96E1</td>
<td class="instruction">LD ($B7E8),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96e4"></span>96E4</td>
<td class="instruction">CALL <a href="C064.html">Sounds_FindEmptySlot</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96e7"></span>96E7</td>
<td class="instruction">LD (IX+$00),$07</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96eb"></span>96EB</td>
<td class="instruction">LD (IX+$01),$20</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96ef"></span>96EF</td>
<td class="instruction">POP IX</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96f1"></span>96F1</td>
<td class="instruction">POP HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="96f2"></span>96F2</td>
<td class="instruction">LD HL,($B7A6)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96f5"></span>96F5</td>
<td class="instruction">EXX</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96f6"></span>96F6</td>
<td class="instruction">LD HL,$B7EE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96f9"></span>96F9</td>
<td class="instruction">LD A,$01</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="96fb"></span>96FB</td>
<td class="instruction">LD ($5CDD),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="routine-comment" colspan="5">
<span id="96fe"></span>
<div class="comments">
<div class="paragraph">
This entry point is used by the routine at <a href="BDCF.html">BDCF</a>.
</div>
</div>
</td>
</tr>
<tr>
<td class="address-2"><span id="96fe"></span>96FE</td>
<td class="instruction">LD B,$03</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="9700"></span>9700</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9701"></span>9701</td>
<td class="instruction">AND $F0</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9703"></span>9703</td>
<td class="instruction">CALL <a href="965D.html#9712">$9712</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9706"></span>9706</td>
<td class="instruction">LD A,(HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9707"></span>9707</td>
<td class="instruction">ADD A,A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9708"></span>9708</td>
<td class="instruction">ADD A,A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9709"></span>9709</td>
<td class="instruction">ADD A,A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="970a"></span>970A</td>
<td class="instruction">ADD A,A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="970b"></span>970B</td>
<td class="instruction">CALL <a href="965D.html#9712">$9712</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="970e"></span>970E</td>
<td class="instruction">DEC HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="970f"></span>970F</td>
<td class="instruction">DJNZ <a href="965D.html#9700">$9700</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9711"></span>9711</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="9712"></span>9712</td>
<td class="instruction">LD DE,$6975</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9715"></span>9715</td>
<td class="instruction">ADD A,E</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9716"></span>9716</td>
<td class="instruction">LD E,A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9717"></span>9717</td>
<td class="instruction">JR NC,<a href="965D.html#971a">$971A</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9719"></span>9719</td>
<td class="instruction">INC D</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="971a"></span>971A</td>
<td class="instruction">LD ($972E),DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="971e"></span>971E</td>
<td class="instruction">EXX</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="971f"></span>971F</td>
<td class="instruction">LD ($9742),HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9722"></span>9722</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9723"></span>9723</td>
<td class="instruction">LD HL,$1200</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9726"></span>9726</td>
<td class="instruction">ADD HL,DE</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9727"></span>9727</td>
<td class="instruction">LD A,$08</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9729"></span>9729</td>
<td class="instruction">LD ($9746),SP</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="972d"></span>972D</td>
<td class="instruction">LD SP,$0000</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-2"><span id="9730"></span>9730</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9731"></span>9731</td>
<td class="instruction">POP BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9732"></span>9732</td>
<td class="instruction">LD A,C</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9733"></span>9733</td>
<td class="instruction">OR (HL)</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9734"></span>9734</td>
<td class="instruction">XOR B</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9735"></span>9735</td>
<td class="instruction">LD (DE),A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9736"></span>9736</td>
<td class="instruction">LD BC,$0020</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9739"></span>9739</td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="973a"></span>973A</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="973b"></span>973B</td>
<td class="instruction">ADD HL,BC</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="973c"></span>973C</td>
<td class="instruction">EX DE,HL</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="973d"></span>973D</td>
<td class="instruction">EX AF,AF'</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="973e"></span>973E</td>
<td class="instruction">DEC A</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="973f"></span>973F</td>
<td class="instruction">JR NZ,<a href="965D.html#9730">$9730</a></td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9741"></span>9741</td>
<td class="instruction">LD HL,$0000</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9744"></span>9744</td>
<td class="instruction">INC L</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9745"></span>9745</td>
<td class="instruction">LD SP,$0000</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9748"></span>9748</td>
<td class="instruction">EXX</td>
<td class="comment-0" rowspan="1"></td>
</tr>
<tr>
<td class="address-1"><span id="9749"></span>9749</td>
<td class="instruction">RET</td>
<td class="comment-0" rowspan="1"></td>
</tr>
</table>
<table class="asm-navigation">
<tr>
<td class="prev">
Prev: <a href="964B.html">964B</a>
</td>
<td class="up">Up: <a href="../maps/all.html#965d">Map</a></td>
<td class="next">
Next: <a href="974A.html">974A</a>
</td>
</tr>
</table>
<footer>
<div class="release"></div>
<div class="copyright">&copy; 1987 Elite Systems &copy; 2023 ArcadeGeek LTD.</div>
<div class="created">Created using <a href="https://skoolkit.ca">SkoolKit</a> 9.0.</div>
<div class="repository">Link to <a href="https://github.com/pobtastic/batty/">Source code</a>.</div>
<div><a href="../dec/asm/38493.html">Switch to decimal</a>.</div>
</footer>
</body>
</html>